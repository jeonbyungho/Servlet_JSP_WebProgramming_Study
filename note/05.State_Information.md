# 1.📇상태정보 유지

## 🚩1-1. 무상태(`Stateless`)

`HTTP Protocol`의 통신 방식은 클라이언트의 요청(`Request`)이 있을 때마다 매번 연결하는 방식이며, 서버가 클라이언트에게 응답(`Response`)을 보내는 *즉시 클라이언트와 서버간 연결은 끊어집니다*.

이처럼 클라이언와 서버 간에 연결상태가 유지되지 않는 통신 방식을 무상태(`Stateless`)라고 합니다.

## 🚩1-2. 무상태 통신 방식의 특징

한 번 접속한 후 연결이 유지되지 않고 끊어지기 때문에 서비스를 요청한 *클라이언트에 대한 정보가 유지되지 않습니다.*

> 즉, 클라이언트에서 연속해서 서버에 정보를 요청할 때 이전 요청의 처리 결과를 유지해서 다음 요청에 사용할 수 없다는 것을 의미합니다.

그러므로 클라이언트가 이전 요청에서의 처리결과를 계속해서 다른 요청에서도 반영하여 사용하고 싶다면 서버 측이든 클라이언트 측이든 어딘가에 저장해서 *정보를 유지*해야 되는 필요성이 생깁니다.

# 2.🥏상태정보 유지의 분류

상태 정보 기술| 유지 기간 분류| 저장 위치 분류|
---:|---|---
`javax.servlet.ServletContext`| 웹 애플리케이션 단위| 서버 측
`javax.servlet.http.Cookie`| 클라이언트 단위| 클라이언트 측
`javax.servlet.http.HttpSession`| 클라이언트 단위| 서버 측
`javax.servlet.http.HttpServletRequest`| 요청 단위| 서버 측

## 🏠2-1. `ServletContext`

서버가 시작될 때 생성되는 `ServletContext` 객체는 웹 애플리케이션 단위로 생성됩니다.

`ServletContext` 객체가 가지고 있는 변수는 동일한 웹 애플리케이션에 속한 모든 페이지에서 사용할 수 있는 전역 변수입니다.

### 📌`void setAttribute(String name, Object value)` 메서드

웹 애플리케이션 범위에서 공유할 데이터를 `ServletContext`객체에 등록하는 메서드입니다.

두 번째 인자가 `Object`로 선언되었으므로 어떠한 자바 객체든지 공유할 수 있습니다.

### 📌`Object getAttribute(String name)` 메서드

`ServletContext`객체에 등록된 데이터를 추출하는 메서드입니다. 해당 메서드는 `Object`로 데이터를 반환하므로 데이터를 추출한 다음에는 반드시 본래 데이터 타입으로 형변환을 한 후에 사용해야 합니다.

### 📌`void removeAttribute(String name)` 메서드

`setAttribute()` 메서드로 등록한 데이터를 삭제합니다.

## 🍪2-2. 쿠키(`Cookie`)

서버가 클라이언트에 저장하는 정보로서 *클라이언 측에 정보를 저장*해놓고 *서버 측에서 필요할 때 추출*하는 것을 지원하는 기술입니다.

### 📌쿠키와 세션의 차이점

구분 |저장 위치 | 저장 데이터 타입| 저장 데이터 크기
---|---|---|---
쿠키|클라이언트 | 텍스트 | 제한 있음
세션|서버 | 객체 | 서버에서 수용할 수 있는 만큼

## 🫙2-3. 세션(`Session`)

`HTTP` 기반으로 동작하는 클라이언트가 서버에 정보를 요청할 때 생성되는 **상태 정보**를 세션이라고 합니다.

`HttpSession` 객체가 생성될 때 요청으로 보내온 클라이언트 정보, 요청 시간 정보 등을 조합한 **세션 ID**가 부여되며, 세션 ID는 *클라이언트 측에 쿠키 기술로 저장됩니다.*

### 📌`HttpSession` 객체

클라이언트마다 개별적으로 생성되어 유지되는 `HttpSession` 객체는 요청을 보내온 클라이언트와 서버간에 *일정 시간 동안 각 클라이언트의 상태정보를 서버에 저장*하여 **유지 및 관리**하고자 하는 목적으로 사용되는 객체입니다.

> 클라이언트와 서버간 세션의 최대 유지 시간은 브라우저가 살아있는 동안 입니다.

`HttpSession` 객체가 활용되는 예시로는 다음과 같습니다.

- 쇼핑몰 사이트의 장바구니 기능
- 사용자 인증 처리를 하는 경우
   - 사용자 계정 로그인, 로그아웃 등등

### 📌세션 트래킹(`Session tracking`)

클라이언트마다 상태정보를 일정 시간 동안 *개별적으로 유지하여 사용하는 기술*입니다.

세션 트래킹 기능 구현 순서는 다음과 같습니다.

1. 클라이언트를 위한 세션 준비
   - 이미 세션이 존재하면 그것을 추출합니다.
   - 그렇지 않으면 새로 세션을 생성합니다. 새 세션마다 고유한 ID가 하나씩 부여되며, 해당 ID는 클라이언트에 쿠키 기술로 저장됩니다.
   ```java
   interface HttpServletRequest {
      HttpSession getSesstion()
   }
   ```
   - `HttpSession` 객체를 사용하고자 할 때, `getSesstion()` 메서드를 이용하여 생성하거나 기존의 `HttpSession`객체의 주솟값을 추출하여 사용합니다.
1. 정보를 저장할 목적의 객체 생성한 후, 해당 객체를 세션에 등록.
   ```java
   interface HttpSession {
      vodi setAttribute(String name, Object value)
   }
   ```
1. 클라이언트가 요청을 전달할 때마다 세션에 등록된 정보를 담고 있는 객체를 추출하여 원하는 기능에 사용.
   ```java
   interface HttpSession {
      Object getAttribute(String name)
   }
   ```
1. 세션이 더 이상 필요 없는 시점에서 세션을 소멸시킴.
   ```java
   interface HttpSession {
      void removeAttribute(String name)
   }
   ```

## 📨2-4. `HttpRequest`
